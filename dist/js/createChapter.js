$(function(){var e=$.getUrlParam("courseId");$(".addNew").click(function(){$(".con_rig_con").fadeOut(100);$(".con_right").append('<div class="con_rig_con clearfix"><p><span>发布新章节</span>严禁发布违反国家法律法规的视频内容</p><div class="con_left_dec"><label for="chapterName">章节名称</label><label for="chapterFile">章节视频</label><label for="chapterDec">章节视频</label></div><div class="con_right_inp"><form id="chapterForm"><input type="text" class="myInput" id="chapterName" placeholder="请输入章节名称"><input type="file" id="chapterFile" name="file"><textarea id="chapterDec" class="myInput" rows="10" autofocus="autofocus"></textarea><input type="submit" value="发布" id="registerChapter"></form><div class="progress"><div class="bar"></div ><div class="percent">0%</div ></div></div></div>')}),$(".con_right").on("click","#registerChapter",function(){var t=$(".bar"),a=$(".percent");$("#chapterForm").submit(function(){return $(this).ajaxSubmit({type:"POST",url:"http://182.92.220.222:8080/coursedetails/create",data:{name:$("#chapterName").val(),descript:$("#chapterDec").val(),courseId:e},contentType:!1,cache:!1,processData:!1,beforeSubmit:function(){},uploadProgress:function(e,r,c,i){var l=i+"%";t.width(l),a.html(l)},success:function(t){alert(t),window.location.href="./createChapters.html?courseId="+e},error:function(e){alert("创建章节失败")}}),!1})}),$.ajax({url:"http://182.92.220.222:8080/coursedetails/readCourseAll/"+e,success:function(e){var t=e||[];console.log(t);0==t.length&&$(".chapters").append('<li>暂无章节视频 <button class="del">删除</button></li>');for(var a=0;a<t.length;a++){var r="<li>"+t[a].name+'<button class="del">删除</button></li>';$(".chapters").append(r)}}})});