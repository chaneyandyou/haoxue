$(function(){function e(){var e=new FormData($("#createForm")[0]);$.ajax({url:"http://182.92.220.222:8080/teacher/update?id="+o.id,type:"post",data:e,cache:!1,processData:!1,contentType:!1,success:function(e){alert(e),location.reload()},error:function(e){alert("错误！！")},xhrFields:{withCredentials:!0}})}function a(){$.ajax({url:"http://182.92.220.222:8080/course/readTeacherAll",type:"GET",data:{page:"1",teacherId:c},timeout:1e3,success:function(e){t=e.content,n=e.totalPages;for(var a=0;a<t.length;a++){var o='<a href="#" class="courseBox" data-index=" '+t[a].id+'"><img src="'+t[a].cover+'" alt="" ><p>课程名称：'+t[a].name+'</p><span class="grade">'+t[a].subject+'</span><span class="isFree">¥：'+t[a].price+'</span><button class="delete"><i class="iconfont icon">&#xe61b;</i></button></a>';$(".con_course").append(o)}for(var a=0;a<n;a++){var c='<li><button data-index="'+(a+1)+'" class="pageBtn">'+(a+1)+"</button></li>";$(".pagesUl").append(c)}$(".con_course").on("click",".courseBox",function(){var e=$.trim($(this).data("index")),a="./createChapters.html?courseId="+e;window.open(a)})},error:function(){alert("很抱歉，创建失败")}}),$(".manage").click(function(){$(".delete").fadeIn(100)}),$(".con_course").on("click",".delete",function(e){e.stopPropagation();var a=$(this).parent().data("index");$.ajax({url:"http://182.92.220.222:8080/course/delete/"+a,type:"get",success:function(e){alert(e),window.location.reload()},xhrFields:{withCredentials:!0}})})}var t=null,n=null,o=store.get("userInfo");if(void 0==o)alert("您还没有登录"),window.location.href="../view/login.html";else var c=o.id;$(".lazy").lazyload(),$.loginStatus(o),function(){$("#managerBtn").click(function(){$("#update").show(),$(".disInput").removeAttr("disabled")})}(),function(){$(".teaPerNav li").click(function(){$(this).addClass("cur").siblings().removeClass("cur"),"center"==$(this).attr("id")?($("#userMain").show(),$("#courseMain").hide()):"courseMan"==$(this).attr("id")&&($(".con_course").html(""),$(".pagesUl").html(""),$(".footer").hide(),$("#courseMain").show(),$("#userMain").hide(),$(".footer").show(),a())})}(),function(){$.ajax({url:"http://182.92.220.222:8080/teacher/read/"+c,type:"get",success:function(e){null!=e.graduateSchool&&($("#userName").val(e.realName),$("#school").val(e.graduateSchool),$("#classSubject").val(e.subject),$("#classGrade").val(e.level),$("#teacDec").val(e.profile)),$.renderIcon($(".userIcon"),e.icon)}})}(),function(){$(".pagesUl").on("click",".pageBtn",function(){var e=$(this).data("index");$.ajax({url:"http://182.92.220.222:8080/course/readTeacherAll",type:"GET",data:{page:e,teacherId:c},timeout:1e3,success:function(e){t=e.content,n=e.totalPages,$(".con_course").html("");for(var a=0;a<t.length;a++){var o='<a href="#" class="courseBox" data-index=" '+t[a].id+'"><img src="'+t[a].cover+'" alt="" ><p>课程名称：'+t[a].name+'</p><span class="grade">'+t[a].subject+'</span><span class="isFree">¥：'+t[a].price+'</span><button class="delete"><i class="iconfont icon">&#xe61b;</i></button></a>';$(".con_course").append(o)}$(".con_course").on("click",".courseBox",function(){var e=$.trim($(this).data("index")),a="./createChapters.html?courseId="+e;window.open(a)})},error:function(){alert("很抱歉，创建失败")}})})}(),$.logout(),$("#update").click(function(){e()})});